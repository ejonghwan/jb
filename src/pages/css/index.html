<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">

    <title>Document</title>
</head>

<body>

    <div class="wrap">
        <header>
            <nav class="global_wrap sub">
                <ul class="line"></ul>
            </nav>
        </header>
        <main>
            <div class="global_wrap">


                <section class="conts">
                    <p>
                        1. 성능 측성 검사
                        <a href="https://pagespeed.web.dev/" target="_blank" title="새창">https://pagespeed.web.dev/</a>
                    </p>
                    <p>
                        2. 구글 크롬 라이트하우스
                    </p>
                    <p>
                        3. font최적화
                        <a href="https://d2.naver.com/helloworld/4969726">d2 naver blog post</a>
                    </p>
                    <p>
                        4. 브라우저 렌더링
                        <a href="https://d2.naver.com/helloworld/59361">d2 naver blog post</a>
                    </p>
                    <p>
                        5. 리플로우 질문 남길 블로그
                        https://blinders.tistory.com/93
                    </p>
                </section>

                <!-- category 1 -->
                <section class="conts">
                    <h2>Performance</h2>

                    <div class="depth_2">
                        <strong>css optimization</strong>
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>사전로드</button></dt>
                                <dd>
                                    preload | prepetch | preconnect
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

https://web.dev/i18n/ko/preload-critical-assets/

# 사전로드 
필수로 쓰는 리소스들을 HTML parse할 때 사전로드 시켜 
필요할 때 다운로드하지 않고 바로 실행시킬 수 있다 


# preload 
접속 한 페이지의 리소스를 사전로드함 

- css 
link rel="preload" as="style" href="경로" onload="this.onload=null; this.rel='stylesheet'; "

- script 
link rel="preload" as="script" href="main.js"  // 여기서 사전다운로드 받으면  
script src="main.js"  // 얘를 만났을 때 다운로드하지않고 실행한다 

as의 값은 기본값이 script


- image 
link rel="preload" as="image" href="경로"

- font 
link rel="preload" as="font" type="font/woff2" href="/fonts/aa.woff2" crossorigin //크로스 오리진 안넣으면 두번 다운로드
@font-face {
    설정
} 


# prepetch 
접속 할 페이지의 리소스를 다운로드함 
(예를 들어 메인페이지에 들어갔을 때 서브페이지 자원들을 미리 로드할 수 있음)



# preconnect
접속할 url의 TCP 통신의 기초작업을 미리 설정
..리소스를 많이 먹기 떄문에 과도하게 사용 노




https://couplewith.tistory.com/entry/%EA%BF%80%ED%8C%81-%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-prefetchpreconnect




                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>폰트 최적화<span></span></button></dt>
                                <dd>
                                    상황에 맞게 폰트 최적화 방법
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

FOUT (IE, 엣지) 방식 : 시스템폰트 였다가 웹폰트가 늦게 먹어서 움찔거림
FOIT (크롬) 방식 : 웹폰트가 다운로드 다 받아져야 폰트자체가 생겨남 


해결방법(구글에서는 preload와 optional 권장)


# 폰트 적용 시점 컨트롤

font-display: 속성 이용
auto 
- 브라우저 기본동작

block 
- FOIT (timeout = 3s...3초까진 기다렸다가 그래도 안나오면 시스템폰트 적용)

swap 
- FOUT (기본폰트 적용 이후 웹폰트)

fallback 
- FOIT (timeout = 0.1s)... 0.1초만에 기본폰트를 보여주고 
  3초 이후에도 웹폰트를 다운로드 못했을 시 기본폰트를 쭉 보여주고 웹폰트는 캐시.. 
  다음엔 바로 캐시 웹폰트로보여줌

optional 
- FOIT(timeout = 0.1s)... fallback이랑 비슷하지만 네트워크 상태에 따라 
  기본폰트로 유지할지 웹폰트로 적용할지 결정, 이후 캐시



# 폰트 사이즈 줄이기   
(EOT > TTF/OTF > WOFF > WOFF2) 용량 낮은순
https://transfonter.org/ (폰트변환)


# 웹폰트 포멧 사용
@font-face {
  font-family: fontname;
  src: local('fontname'), //시스템에 있으면 다운로드 받지않고 ...로컬폰트 사용
       url('./assets/fonts/fontname.woff2') format('woff2'), //이거 지원안하면 아래꺼 적용
       url('./assets/fonts/fontname.woff') format('woff'),
       url('./assets/fonts/fontname.ttf') format('truetype');
  font-display: block;
  unicode-range: u+0041; // A에 대한 폰트가 있을 때만 폰트파일 다운로드 
}


# local 폰트 사용 (위에꺼처럼)
src: local('fontname'), //시스템에 있으면 다운로드 받지않고 ...로컬폰트 사용
만약 FOIT 방식으로 적용하고 움찔하는걸 없애려면 시스템폰트와 웹폰트가 비슷한걸 쓰고 방식을 FOIT로 됨 


# Subset 사용 (특정문자 몇개만  사용 할 때)
만약 2글자만 웹폰트를 사용한다면 필요한 2글자만 자를 수 있음 
(1) https://transfonter.org/  접속 
(2) 하단 Subset 옵션(특정 폰트) 설정하거나 Charactoers(특정 문자)에 넣고싶은 문자만 넣고 Convert 
(3) Convert 된 subset 폰트파일 css에 적용

- 단점은 다른곳에서 폰트적용을 했을 때 쓰지않아도 다운로드함. 이 단점을 없애려고 unicode range 적용
unicode-range: u+0041; // A에 대한 폰트가 있을 때만 폰트파일 다운로드 


# Unicode Range 적용 (위에꺼 단점 대응)
unicode-range: u+0041,u+0042,u+0043,u+0044,u+0045,u+0046,u+0054 // A에 대한 폰트가 있을 때만 폰트파일 다운로드 

Array.prototype.map.call('ABCDEFT', c => 'u+' + ('0000' + c.charCodeAt(0).toString(16)).slice(-4)).join(',') //유니코드 뽑아내는 코드 u+0041,u+0042,u+0043,u+0044,u+0045,u+0046,u+0054


# data-uri로 변환 (웹팩 이미지 메모리저장하는거랑 비슷한 방식)
(1) https://transfonter.org/  접속 
(2) 하단 Subset 옵션(특정 폰트) 설정하거나 Charactoers(특정 문자)에 넣고싶은 문자만 넣고 
(3) 상단 base64 encode  온!! 하고 Convert


3번 Subset과 용량은 비슷하지만 네트워크 요청시간을 줄이고 css불러올떄 같이불러옴  

@font-face {
    font-family: fontname;
    src: local('fontname'), //시스템에 있으면 다운로드 받지않고 ...로컬폰트 사용
         url('data:app~~~asasfasdas~') format('woff2'), //이거 지원안하면 아래꺼 적용
         url('data:app~~~asasfasdas~') format('woff'),
         url('data:app~~~asasfasdas~') format('truetype');
    font-display: block;
    unicode-range: u+0041; // A에 대한 폰트가 있을 때만 폰트파일 다운로드 
}
                                
                    

# 폰트 프리로드 
- 보통은 css를 읽으면서 @font-face를 읽을 때 폰트가 필요해! 하고 다운로드하지만 
  프리로드는 그 전에 다운로드 하는 기법

1. HTML 에서 사전로드를 하고 
&lt;link rel="preload" href="주소나 경로.woff2" as="font" type="font/woff2" crossorigin /&gt;

2. @font-face 에서 사용.. 1번에서 사전 로드했으니 css에서 아래 소스를 만나도 로드하지않음
@font-face {
    font-family: fontname;
    src: local('fontname'), //시스템에 있으면 다운로드 받지않고 ...로컬폰트 사용
         url('./assets/fonts/fontname.woff2') format('woff2'), //이거 지원안하면 아래꺼 적용
         url('./assets/fonts/fontname.woff') format('woff'),
         url('./assets/fonts/fontname.ttf') format('truetype');
    font-display: block;
  }


!! 여기서 질문?  이거 질문올림
@font-face가 들어있는 css 자체를 preload로 사전로드하면 폰트도 사전로드 될까 ?  



# 중요 ...나중에 확인 사실 
- 웹폰트는 한개만 다운로드 받을 시 그거만 사용가능.. (strong, b 태그로 노멀, 볼드정도만 가능함) 
- 웹폰트 받을 때 @font-face url에서 받는게 아니라 실제 cssom 트리가 만들어질 때 다운을 받기 떄문에 
  필요한 폰트(thin normal bold 등등..) 클래스로 나눠 쓰는게 효율적으로 보임

폰트 이름은 같게 하고 폰트굵기로 구분을... 

ex) 
@font-face {font-family: 'Noto Sans KR';font-style: normal;font-weight: 700;src: url(//fonts.gstatic.com/ea/notosanskr/v2/NotoSansKR-Bold.woff2) format('woff2'),url(//fonts.gstatic.com/ea/notosanskr/v2/NotoSansKR-Bold.woff) format('woff'),url(//fonts.gstatic.com/ea/notosanskr/v2/NotoSansKR-Bold.otf) format('opentype');}
@font-face {font-family: 'Noto Sans KR';font-style: normal;font-weight: 900;src: url(//fonts.gstatic.com/ea/notosanskr/v2/NotoSansKR-Black.woff2) format('woff2'),url(//fonts.gstatic.com/ea/notosanskr/v2/NotoSansKR-Black.woff) format('woff'),url(//fonts.gstatic.com/ea/notosanskr/v2/NotoSansKR-Black.otf) format('opentype');}

실제 적용은 엘리먼트에 폰트 적용 했을 때...!!



근데 좀 이상한 점이 아리따돋음, 아리따부리를 같은 이름으로 저장시 두개를 모두 다운로드 받는데 .. 메인에서는 한개만 다운로드 받음 
@font-face {
    font-family: 'Arita-dotum-Medium';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/Arita-dotum-Medium.woff') format('woff');
    font-weight: 400;
    font-style: normal;
}
@font-face {
    font-family: 'Arita-dotum-Medium';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/Arita-buri-SemiBold.woff') format('woff');
    font-weight: 900;
    font-style: normal;
}



폰트 잘 정리되어있음 
https://d2.naver.com/helloworld/4969726?fbclid=IwAR3_12Ifl9-yM0TP_21XFNN6Pl3PVYuMH9kLPPFVclfdyOn4asKlhI1ZRCM


    </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>16.6666666 <span>ms</span></button></dt>
                                <dd>
                                    모니터 주사율과 로드 속도
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
모니터는 1초에 깜빡이는 속도가 있는데 이걸 fps라고 하며 
모니터의 주사율은 각 모니터마다 다르지만 1초에 60fps로 잡는다면

한번 깜빡일 때 컨텐츠가 그려져야 덜 덜컥거림
한번 깜빡이는 건  1000ms / 60 = 16.666666ms...

즉 일정하게 16.6ms 마다 로드가 되야 사람들 눈에 자연스럽게 보인다 

ex) 
0          ~           60
||||||||||||||||||||||||

이렇게 모두 16ms이면 자연스럽게 화면에 표시되어 상관없지만  

0            ~                60
||||||| |||||||    ||||||||||
      20ms     30ms             

어떤 특정 엘리먼트들의 로드시간이 16ms를 넘어간다면 사용자는 저렇게 띄엄띄엄 부자연스러운 화면을 보게 될 것임
    
    </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>메모리 누수</button></dt>
                                <dd>
                                    가비지 콜렉터
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
자바스크립트는 가비지콜렉팅 언어로 사용하지 않는 것들은 가비지 콜렉터가 없애줌... 
하지만 원하지 않은 참조로 몇가지 경우로 없애지 않을 때가 있는데...  

1. 전역변수 
2. 해제되지 않은 타이머, 콜백
3. 돔 외부에서 참조 
4. 클로저 잘못 사용
    
    </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>불필요한 CSS 제거</button></dt>
                                <dd>
                                    불필요한 CSS를 제거 했는가 ?
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="javascript">
#remove unused css
- Remove unused CSS 구글 라이트하우스는 2KB 이상 미사용 CSS가 포함된 파일을 검출해서 오류로 체크함. coverage 탭에 상세확인가능
* 폰트는 사용하지않는 CSS로 구분하는 오류가있음
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>렌더차단 리소스 제거</button></dt>
                                <dd>
                                    렌더차단 리소스를 제거 했는가 ?
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# render blocking
- CSS는 기본적으로 렌더차단 리소스라고 부르는데 웹 브라우저가 CSS파일을 만나면 다운로드하고 CSS를 해석하는 동안 렌더를 잠깐 멈춤
(이건 CSSOM 그릴 때 말하는건가 ..? 확인필요)
- 라이트하우스에서 Eliminate render-blocking resources 탭


# 문제발생 
1. 스크립트는 돔파싱 후 가져오기 ..해더에 디퍼,어싱크없는 스크립트들 
2. media 속성이 없거나 media="all"인  link rel="stylesheet" 태그

(x) 렌더차단됨 
link href="style.css" rel="stylesheet" 
link href="style.css" rel="stylesheet" media="all" 

(o) 특정 조건에만 스타일 해석
link href="style.css" rel="stylesheet" media="orientation:portrait"
link href="style.css" rel="stylesheet" media="print"

렌더차단되면 css가 다운로드하고 파싱할때까지 FCP가 발생하지않음 (아래 더 자세히)



# JS 해결방법 
## no async no defer 
1. html 파싱하다 js 만나면 멈춤
2. js 다운로드 후 해석, 실행 
3. 다시 html 파싱 시작 

## async : 병렬 다운로드, 즉시실행 
1. html 파싱하다 js 만나면 파싱하면서 다운로드 같이진행
2. js 다운로드 끝나면 html 파싱 멈추고 js 실행
3. 다시 남은 html 파싱 

## defer : 병렬 다운로드, 지연실행 
1. html 파싱하다 js를 만나도 파싱하면서 다운로드하고 
2. html 파싱이 끝나면 js를 해석, 실행


결론: defer를 안넣을거면 무적권 아래다 넣는게 좋음...왜냐면 다운로드할때 html 파싱을 멈추기때문. 혹은 아래다 넣고 async 넣거나... 

1. 필수 스크립트는 html에 &lt;script&gt; 형식으로 작성
2. 기타 스크립트는 &lt;scrip&gt; 종료 태그 직전에 선언 
3. 마지막에 파싱해도 문제 없으면 defer 속성 
4. 가능한 빠른 시점에 실행 필요하면 async 속성


# CSS 해결방법
rel="stylesheet" : media 속성이 없거나 
rel="stylesheet" : media="all" all 이거나 

위처럼 하면 렌더 차단 리로스임....모든 상황에서 차단되기 떄문에  


## 방법 1
* 아래처럼 특정조건에서만 해석하도록 해야됨 
media="print"
media="screen"
media="orientation:portrait" 

* 분기별로 각자에 맞는 파일 다운로드하게 만듦
&lt;link rel="stylesheet" href="" media="(max-width: 639px)"&gt; 
&lt;link rel="stylesheet" href="" media="(min-width: 640px) and (max-width: 960px)"&gt; 
&lt;link rel="stylesheet" href="" media="(min-width: 961px)"&gt; 


## 방법 2
1. 필수 스타일을 head 안에 style로 작성
2. 지연 스타일은 &lt;link rel="preload"&gt; 속성으로 병렬 로딩 후 지연 적용
예시) &lt;style>/*필수 스타일은 여기*/&lt;/style&gt;
&lt;link rel="preload" href="" as="style" onload="this.onload=null; this.rel='stylesheet'" /&gt; //로드후 렐바꿈. 지연로딩
- this.onload=null 할당이유? 
  rel속성을 변경할 때 일부 브라우저가 다시 onload를 실행하는 것을 방어 함
 

*rel="preload" 에 관한 블로그 
https://runebook.dev/ko/docs/html/preloading_content 



필수 아닌 css는 preload로 병렬로딩 지연적용(onload)

내용 ++
1. 
link rel="stylesheet" href="non-critical.css" media="print" onload="this.media='all'"

"Print" 미디어 타입이란, 사용자가 페이지를 프린트를 하려고 하는 경우에만, 브라우저가 해당 스타일 시트를 불러오는 것으로 렌더링에는 영향을 미치지 않는다. 그리고 여기에 onload 이벤트로 this.media='all'를 추가한다면, 스타일 시트가 로드가 완료되면 미디어 속성을 다시 all로 바꾸면서 스타일 시트가 적용된다.


2. 
또 다른 방법은 link rel="preload"를 사용하는 것이다. 그러나 이 방법은 아래와 같은 단점이 있다
preload는 생각보다 매우 이른 타이밍에, 높은 우선순위로 다운로드 되므로 다른 중요한 애셋의 다운로드 우선순위를 밀어 버릴 수 있다. 

https://yceffort.kr/2021/03/improve-css-performance
https://ui.toast.com/weekly-pick/ko_2021117#%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84-%EC%9E%AC%EC%A7%80%EC%A0%95
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->

                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>LCP <span>로딩속도</span></button></dt>
                                <dd>
                                    큰컨텐츠 빨리 그리기
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# LCP <span class="seg">(Largest Contentful Paint).. 큰덩어리 콘텐츠 그리기</span>
- 구글의 핵심 성능 지표에 포함되는 한 가지 항목
- 모든 성능에 관련된 지식으로 개선해야 높아짐


# 목표
- LCP를 2.5초 이내로 단축시키는게 목표 


# 맨 처음 생기는 덩어리.. 
- 라이트 하우스에 콘텐츠가 포함된 최대 페인트 요소 탭
- 주로 이미지가 가장 큰 컨텐츠일 가능성이 높음(히어로이미지) 
* 맨 처음뜨는 이미지가 무겁기 때문은 아니고 
  이미지를 브라우저가 그리기전에 생기는 
  모든 성능이슈가 LCP 문제를 해결하는 열쇠임 


성능개선 사례 
before - https://t.ly/tyMg 
after - https://t.ly/a7uy


# 해결방법 
## 1. 라이브러리 의존 줄이기
- jquery, lodash, mormalize, reset.css...등 내가 사용하지않는 기능을 포함하고 있기에 렌더차단 리소스로 작용할 확률이 높음
- jquery가 FCP(first content paint)를 엄청나게 지연시킴 
- https://youmightnotneed.com/ (바닐라로 작업된 내용물들 좀 있음)


## 2. 사용하지않는 css 제거


## 3. preconnect / preload
- css를 그냥 링크하면 css 읽을 때 렌더링 멈춤
(x) ? 이거도 병렬인데 ... 그냥 preload가 더 좋은가봄
&lt;link rel="stylesheet" href="*.css"&gt; 

(o)
&lt;link rel="preconnect" href="https://fonts.gataic.com"&gt; 
- href에 연결된 주소를 미리 연결하는 기능..미리 연결해서 준비해뒀다 필요한 내용을 다운로드함 
- 도메인을 알지만 자원의 최종 경로를 모르는 경우 서버와의 연결을 미리 설정 
- DNS, TCP, TLS 왕복에 필요한 시간을 단축 
- 서드파티 자원 연결에 적합..구글웹폰트 등

&lt;link rel="preload" as="style" href="*.css" onload="this.onload=null; this.rel='stylesheet'"&gt;
- css파일은 다운로드하면서 웹페이지 렌더링을 차단하지않음. 동시에 진행..그리고 로드 후 지연적용함
- img js 등 다양한 파일들을 병행 로드할 수 있음  as는 필수. as="script" as="image"


!! 주의점은 리소스의 사전로드와 병렬진행이 무조건적으로 빠르진 않다 ...(html 파싱 막는 리소스다운로드 제외.. 리소스끼리)
이미지 리소스를 병렬진행하면 다운로드가 느려질 수 있기 때문에 
꼭 필요한 이미지부터 사전로드와 병렬진행하고 나머지 이미지는 레이지 로드나 직렬진행하는게 오히려 더 빠를 수 있다 




## 4. 히어로 이미지 preload... LCP중 img를 미리 다운로드받아둠
&lt;head&gt;
&nbsp;    &lt;link rel="preload" as="image" media="(max-width:640px)" href="small.avif"&gt;
&nbsp;    &lt;link rel="preload" as="image" media="(min-width:641px)" href="large.avif"&gt;
&lt;/head&gt;


## 5. feature detection 
- image type 이나 viewport width를 감지해서 성능을 개선
&lt;picture&gt;
&nbsp;    &lt;source srcset="small.avif" type="image/avif" media="(max-width:640px)"&gt;
&nbsp;    &lt;source srcset="large.avif" type="image/avif"&gt;
&nbsp;    &lt;source srcset="small.webp" type="image/webp" media="(max-width:640px)"&gt;
&nbsp;    &lt;source srcset="large.webp" type="image/webp"&gt;
&nbsp;    &lt;img src="small.jpg" alt&gt;
&lt;/picture&gt;


## 6. image loading / decoding
- 이미지 지연로딩

&lt;img src="x.jpg" alt&gt; (x)
&lt;img src="x.jpg" alt loading="lazy" decoding="async"&gt; (o)

loading="lazy" - 뷰포트안에 없으면 로딩하지않음.. 스크롤하면 그때 로딩 
decoding="async" - decoding: 암호화했던 이미지를 복호화함. async값을 주면 화면에 다른 요소를 렌더링하는걸 중단하지않고 다른 요소를 먼저 표시 후 이미지를 뒤늦게 화면에 표시...(다른콘텐츠 표시 속도 빨라짐)

* img 요소에만 사용..picture, source에는 사용하지않음




## 7. css import vs link 
import : 엣지에서 문제발생. 직렬 
link : 병렬, 사전로드 가능 

결론: link를 쓰자

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->

                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>FID</button></dt>
                                <dd>
                                    사용자의 행동에 대해 실제로 이벤트 핸들러가 반응하기까지 걸리는 시간
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# FID <span class="seg">first input delay === total blocking time</span>

100ms 이내가 양호....

사용자의 행동에 대해 실제로 이벤트 핸들러가 반응하기까지 걸리는 시간.. 

사용자가 이벤트를 발생시켰을 때 메인스레드가 다른 작업중이라면 해당 작업을 끝내고 실행이 될텐데 그 시간을 말함

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>CLS</button></dt>
                                <dd>
                                    로드시점에서 덜컥거림..기존 레이아웃 변경 (layout shift)
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# CLS <span class="seg">(cumulative layout shift)</span>
- 사용자 경험을 측정하는 대표적인 지표
- 구글의 검색결과에 반영됨
- 0.1 이내로 단축


# 사례
- 뒤늦게 돔이 추가되거나 배치가 변경되면서 사용자가 다른 버튼을 누르는 사례
- FOIT(font of invisible text) : 텍스트가 보이지 않다가 갑자기 화면에 나타남 
- FOUT(font of unstyled text) : 스타일없다가 갑자기 웹폰트 스타일로 바뀌는 사례
- 치수를 알 수 없는 이미지 로딩
- 동적으로 추가된 돔
- 웹폰트 swap 페인팅


# 목표
라이트하우스 Cumulative Layout Shift 0~1 중 0.1 이내로 단축
* 개발자도구 퍼포먼스 > Experience > summary 탭에서도 확인가능



# 해결방법 
## 1. 자리표시자 활용
- 동적으로 표현되는 컨텐츠에는 들어올 자리를 미리 잡아놓음
.class { min-height: 100px; background: silver; }


- 애니메이션은 transform 속성으로 사용



- 이미지/영상 요소에 비율 힌트 제공.. 이미지에 width height 넣어줘야함

이미지 
&lt;img src="" alt="" width="800" height="800"&gt; (o)
+
max-width: 100%;
height: auto;

* 웹브라우저는 이미지의 width, height로 비율을 계산하기떄문에 css로 하더라도 넣어주는게 좋음. 비록 로딩 후 해당 사이즈로 보이지않더라도 ..


영상
.utube {position: relative; padding-top: 56.25%}
.utube__iframe { position: absolute; width: 100%; height: 100%; top:0 }
*패딩탑을 %로 설정하는 것은 부모의 너비값을 기준으로 패딩 비율이 결정됨



## 2. 웹 폰트 대체 글꼴
- 줄간격이나 자간 장평 이런것들이 달라지면서 흔들리는 것을 방지

- 내가 지금  쓰는 웹폰트랑 비슷한 글꼴을 찾아서 시스템폰트에 적용해야함....
font-family: 'Noto sans KR', sans-serif; (x)
font-family: 'Noto sans KR', Verdana (비슷한글꼴), sans-serif; (o)



예제 페이지
before - https://t.ly/w1kp 
after - https://t.ly/itb9


                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->

                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>FCP <span>로딩속도</span></button></dt>
                                <dd>
                                    첫 요소가 로드 될 때까지 걸리는 시간
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# FCP <span class="seg">first Contentfull Paint</span>
첫 요소가 랜더링 되기까지 걸리는 시간 ....


                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>FMP <span>로딩속도</span></button></dt>
                                <dd>
                                    사용자에게 의미있는 컨텐츠 로드되기까지의 시간
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
-
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button>그 외 참고사항</button></dt>
                                <dd>
                                    -
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# 참고한 유툽
https://www.youtube.com/watch?v=A6J74xLWqYg

# 크롬 개발자도구 
https://www.youtube.com/watch?v=cAIo4dEEPuc
https://www.youtube.com/watch?v=toXJLUa7i0Y


# 프로젝트 개선 블로그 
https://velog.io/@jhyj0521/FE-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-feat.-Shall-We-Trip-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8


# 메모리 누수 참고블로그 
https://ohgyun.com/442

# js 최적화 
https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/javascript-startup-optimization?hl=ko

# 랜더 설명 
https://darrengwon.tistory.com/1332


# 서비스 성격에 따라
1. 넷플릭스 같은 곳은 사용자 상호작용 FID와 메모리, 사용자 입력 안정화 대기시간 중요 
2. 위키디피아, 이 사이트 같은 경우 정보전달이 목적이니 로드되는 속도, cpu 소요시간이 중요 


# 기본환경에서  체크 
크롬 확장프로그램 같은게 많이 깔려있으면 성능체크에 영향이 가니 
시크릿모드에서 측정하는걸 추천 


# 모바일은 모바일에서 피시는 피시환경에서 체크하기 
웹으로 모바일로 체크해도 소용이 없다 ...? 라고함
실제로 모바일로 체크하고 모바일성능체크하면 피시보다 좀 적게나오긴함


- 검색
개발자도구 -> 컨트롤+쉬프트+p   

- 소스내 검색 
mac: 커맨드+옵션+f 
win: 컨트롤+쉬프트+f 

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                    </div>
                </section>
                <!-- //category 1 -->



                <!-- category 1 -->
                <section class="conts">
                    <h2>단축 CSS</h2>

                    <div class="depth_2">
                        <strong></strong>

                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>animation</button></dt>
                                <dd>
                                    이름, 진행시간, 딜레이, 방향, 카운트, 멈추거나 다시 시작, 타이밍함수, 필모드
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

.class {animation: 이름, 진행시간, 딜레이, 방향, 카운트, 멈추거나 다시 시작, 타이밍함수, 필모드}

1. 이름: test 
2. 진행시간: 애니메이션 진행시간
3. 딜레이: 얼마 후 실행될건지 
4. 방향: 종료되고 진행방향 
- normal: 기본값.. 끝나면 다시 원래위치에서 시작 
- alternate: 순방향 역방향 순방향 역방향 
- reverse: 역방향
- alternate-reverse: 역방향 순방향 역방향 순방향

5. 카운트: 몇번 반복할건지 
- 1 기본값 ~ 숫자 
- infinite: 무한

6. 멈추거나 다시시작: 애니를 멈추거나 다시 시작가능
- running: 재생 
- paused: 정지

7. 타이밍함수: 등속도 
8. 필모드: 시작되기전이나 끝나고 난 후 어떤 값이 적용될건지 
- none: 애니 끝난 후 상태설정 안함 
- forwards: 끝난 후 그 지점에 있음 
- backwards: 애니 후 시작점으로 
- both: 앞 뒤 결과를 조합하여 설정 
- inherit: 애니 상태를 상위 요소한테 상속받음



@keyframes test {
   0% {}
   50% {}
   100% {}
}
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>background</button></dt>
                                <dd>
                                    #ddd url('') no-repeat center center/100% 100%
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

.class {background: color image repeat position/size origin clip attachment}                            
.class {background: #ddd url('') no-repeat center center/100% 100%}


1. background-attachment. scroll | fixed | local
2. background-clip. border-box | padding-box | content-box
3. background-color. name | HEX | rgb() | rgba()
4. background-image. url(images/bg.gif), url(images/bg2.gif)
5. background-repeat. repeat | repeat-x | repeat-y | no-repeat | space | round 
6. background-origin. border-box | padding-box | content-box
7. background-size. width height | contain | cover | auto
8. background-position. x y | top | right | left | bottom


https://designer-ej.tistory.com/entry/CSS-background-%EC%86%8D%EC%84%B1-%EC%A0%95%EB%A6%ACcolor-image-position-repeat-%EB%93%B1
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>font</button></dt>
                                <dd>
                                    style variant weight size/line-height family
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

.class {font: style variant weight size/line-height family;}

1. font-style:normal;
2. font-variant:normal;
3. font-weight:normal;
4. font-size: inherit;
5. line-height:normal;
6. font-family: inherit;

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>border</button></dt>
                                <dd>
                                    1px solid #000; (width style color)
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

.class {border: 1px solid #000;}

1. border-width: 1px;
2. border-style: solid;
3. border-color: #000;

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>transition</button></dt>
                                <dd>
                                    all 1s ease-in 1s; (property duration timing-function delay)
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">

.class {transition: all 1s ease-in 1s;}

1. transition-property
2. transition-duration 
3. transition-timing-function 
4. transition-delay 

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>word-break, word-wrap</button></dt>
                                <dd>
                                    normal | break-all | keep-all
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# 줄바꿈 


# word-break
.class { word-break: normal (default value) }

normal : CJK(아시아문자) 문자는 글자 기준으로, CJK 이외의 문자는 단어 기준으로 줄바꿈
break-all : 문자 기준 
keep-all : 단어 기준
initial : 기본값 
inherit : 상속


# word-wrap
.class { word-wrap: normal (default value) }

normal : 영문은 삐져나감
break-word : 영문 줄바꿈 (한글은 차이없음) 

                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>white-space</button></dt>
                                <dd>
                                    nowrap | pre | pre-line | pre-wrap
                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
# 공백

.class { white-space: normal (default value) }

normal : 자동 줄바꿈
break-spaces : pre-wrap과 비슷
nowrap : 줄바꿈x
pre : 공백 모두 표시, 줄바꿈x (&lt;pre&gt; 태그와 같음)
pre-line : 새로운 줄에서 공백 모두 표시, 줄바꿈 
pre-wrap : 공백 모두 표시, 줄바꿈 
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->

                    </div>
                </section>
                <!-- //category 1 -->

                <!-- flex -->
                <section class="conts">
                    <h2>Flex</h2>
                    <div class="depth_2">
                        <strong></strong>
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button><span></span>상세내용</button></dt>
                                <dd>

                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                                    <code class="markdown">
# self (display: flex)

- flex-direction : 
  row column

- flex-wrap : 
  nowrap wrap

- align-content : (wrap인 상태에서 정렬)
  stretch center flex-start flex-end space-around space-between revert unset 
  normal initial inherit right left start end

- justify-content : (row일땐 가로축, column일땐 세로축)
  flex-start flex-end center space-around space-between space-evenly stretch 
  revert unset normal initial inherit right left start end

- align-items : (row일땐 세로축, column일땐 가로축)
  stretch center flex-start flex-end baseline self-end self-start revert 
  unset normal initial inherit end start



# child
- initial: 0 1 auto;
- auto: 1 1 auto;
- flex: 0 0 auto;

                                        
# flex-grow (0)
0: 자기자신의 너비
1: 가로너비를 모두 나눠 가짐

# flex-shrink (1)
0: 주축 공간이 부족할때 줄지않음 (0 width: 200px 같이주면 다른곳은 줄고 여긴 200px까지 안줄음)
1: 주축 공간이 부족할때 함께 줄음

# flex-basis (auto)
- auto라면 width, height가 먼저
- px % 라면 basis가 먼저

                     

                                    </code>
                                </pre>
                            </div>


                            <style>
                                .flex_wrap {
                                    height: 300px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    background-color: #161b22;
                                    border: 1px solid rgb(44, 44, 44);
                                    margin-top: 10px;
                                    padding: 20px;
                                    overflow: hidden;
                                }

                                .flex1 {
                                    box-sizing: border-box;
                                    border: 1px solid #355999;
                                    margin: 10px 0;
                                    transition: all 1s;
                                    width: 100%;
                                    height: 100%;

                                }

                                .attr {
                                    color: #608dd1;
                                }

                                .flex1 li {
                                    box-sizing: border-box;
                                    background-color: rgba(234, 255, 4, .1);
                                    border: 1px solid rgba(255, 255, 255, .5);
                                    transition: all 1s;
                                }

                                .child input[type="radio"],
                                .parent input[type="radio"] {
                                    position: absolute;
                                    left: -999px;
                                }

                                .child label,
                                .parent label {
                                    color: #888;
                                    transition: all .2s;
                                    padding: 0 6px 0 2px;
                                    position: relative;
                                    cursor: pointer;
                                }


                                .child label::after,
                                .parent label::after {
                                    /* content: ''; */
                                    display: inline-block;
                                    background-color: #282746;
                                    width: 1px;
                                    height: 10px;
                                    position: absolute;
                                    right: 0;
                                    top: 50%;
                                    transform: translateY(-30%);
                                }

                                input::placeholder {
                                    color: #555;
                                }

                                .child input:checked+label,
                                .parent input:checked+label {
                                    color: #fff;
                                    /* font-weight: bold; */
                                    /* text-decoration: underline; */
                                }

                                .dbtn {
                                    color: #fff;
                                    padding: 2px 15px 2px 10px;
                                    border: 1px solid #555;
                                    border-radius: 6px;
                                    position: relative;
                                    font-size: 11px;
                                    ;
                                }

                                .dbtn::after {
                                    content: '';
                                    display: inline-block;
                                    width: 4px;
                                    height: 4px;
                                    border-right: 1px solid #ddd;
                                    border-top: 1px solid #ddd;
                                    transform: translateY(-30%) rotate(45deg);
                                    position: absolute;
                                    top: 50%;
                                    right: 7px;
                                }

                                input[type="text"] {
                                    background: #0d1117;
                                    box-shadow: none;
                                    border: none;
                                    border-bottom: 1px solid coral;
                                    width: 60px;
                                    color: coral;
                                    text-align: center;
                                    margin-left: 10px;
                                    margin-right: 5px;
                                }
                            </style>

                            <article class="flex_wrap">
                                <ul class="flex1">
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                </ul>
                            </article>
                            <br />
                            <article class="parent">
                                <h3><strong>self(parent)</strong></h3>
                                <div>
                                    <span class="attr">display</span> :
                                    <input type="radio" checked name="display" id="block">
                                    <label for="block">block</label>

                                    <input type="radio" name="display" id="flex">
                                    <label for="flex">flex</label>
                                </div>
                                <div>
                                    <span class="attr">flex-direction</span> :
                                    <input type="radio" name="flex-direction" checked id="row">
                                    <label for="row">row</label>

                                    <input type="radio" name="flex-direction" id="column">
                                    <label for="column">column</label>
                                </div>
                                <div>
                                    <span class="attr">flex-wrap</span> :
                                    <input type="radio" name="flex-wrap" checked id="nowrap">
                                    <label for="nowrap">nowrap</label>
                                    <input type="radio" name="flex-wrap" id="wrap">
                                    <label for="wrap">wrap</label>
                                </div>
                                <div>
                                    <span class="attr">align-content</span> :
                                    <input type="radio" name="align-content" checked id="stretch1">
                                    <label for="stretch1">stretch</label>
                                    <input type="radio" name="align-content" id="center1">
                                    <label for="center1">center</label>
                                    <input type="radio" name="align-content" id="flex-start1">
                                    <label for="flex-start1">flex-start</label>
                                    <input type="radio" name="align-content" id="flex-end1">
                                    <label for="flex-end1">flex-end</label>
                                    <input type="radio" name="align-content" id="space-around1">
                                    <label for="space-around1">space-around</label>
                                    <input type="radio" name="align-content" id="space-between1">
                                    <label for="space-between1">space-between</label>
                                </div>
                                <div>
                                    <span class="attr">justify-content</span> :
                                    <input type="radio" name="justify-content" checked id="flex-start2">
                                    <label for="flex-start2">flex-start</label>
                                    <input type="radio" name="justify-content" id="flex-end2">
                                    <label for="flex-end2">flex-end</label>
                                    <input type="radio" name="justify-content" id="center2">
                                    <label for="center2">center</label>
                                    <input type="radio" name="justify-content" id="space-around2">
                                    <label for="space-around2">space-around</label>
                                    <input type="radio" name="justify-content" id="space-between2">
                                    <label for="space-between2">space-between</label>
                                    <input type="radio" name="justify-content" id="space-evenly2">
                                    <label for="space-evenly2">space-evenly</label>
                                    <input type="radio" name="justify-content" id="stretch33">
                                    <label for="stretch33">stretch</label>
                                </div>
                                <div>
                                    <span class="attr">align-items</span> :
                                    <input type="radio" name="align-items" checked id="stretch3">
                                    <label for="stretch3">stretch</label>
                                    <input type="radio" name="align-items" id="center3">
                                    <label for="center3">center</label>
                                    <input type="radio" name="align-items" id="flex-start3">
                                    <label for="flex-start3">flex-start</label>
                                    <input type="radio" name="align-items" id="flex-end3">
                                    <label for="flex-end3">flex-end</label>
                                    <input type="radio" name="align-items" id="baseline4">
                                    <label for="baseline4">baseline</label>
                                    <input type="radio" name="align-items" id="self-end11">
                                    <label for="self-end11">self-end</label>
                                    <input type="radio" name="align-items" id="self-start11">
                                    <label for="self-start11">self-start</label>
                                    <input type="radio" name="align-items" id="revert55">
                                    <label for="revert55">revert</label>
                                    <input type="radio" name="align-items" id="unset55">
                                    <label for="unset55">unset</label>
                                </div>
                            </article>
                            <br />
                            <article class="child">
                                <h3><strong>child</strong></h3>
                                <div>
                                    <span class="attr">flex-grow</span> :
                                    <input type="radio" name="flex-grow" id="1">
                                    <label for="1">1</label>
                                    <input type="radio" name="flex-grow" checked id="0">
                                    <label for="0">0</label>
                                </div>
                                <div>
                                    <span class="attr">flex-shrink</span> :
                                    <input type="radio" name="flex-shrink" checked id="s1">
                                    <label for="s1">1</label>
                                    <input type="radio" name="flex-shrink" id="s0">
                                    <label for="s0">0</label>
                                </div>
                                <div>
                                    <span class="attr">flex-basis</span> :
                                    <input type="radio" name="flex-basis" id="b0">
                                    <label for="b0">0</label>
                                    <input type="radio" name="flex-basis" checked id="auto">
                                    <label for="auto">auto</label>
                                    <input type="text" id="number" value="" placeholder="px / %">
                                    <button class="dbtn number">click</button>
                                </div>
                                <div>
                                    <span class="attr">width</span> :
                                    <input type="text" id="width" value="" placeholder="px / %">
                                    <button class="dbtn width">click</button>
                                </div>
                                <br />
                                <!-- customer -->
                                <article class="custom">
                                    <h3><strong>select box custom</strong> <button class="dbtn custombtn">custom
                                            click!</button></h3>
                                    <div class="select-box123">
                                        <span class="attr">select box</span> :
                                        <input type="text" id="select" value="" placeholder="box num">
                                    </div>
                                    <div class="flex-grow123">
                                        <span class="attr">flex-grow</span> :
                                        <input type="radio" name="flex-grow123" id="grow1" data-val="1">
                                        <label for="grow1">1</label>
                                        <input type="radio" name="flex-grow123" checked id="grow0" data-val="0">
                                        <label for="grow0">0</label>
                                    </div>
                                    <div class="flex-shrink123">
                                        <span class="attr">flex-shrink</span> :
                                        <input type="radio" name="flex-shrink123" checked id="shrink1" data-val="1">
                                        <label for="shrink1">1</label>
                                        <input type="radio" name="flex-shrink123" id="shrink0" data-val="0">
                                        <label for="shrink0">0</label>
                                    </div>
                                    <div class="flex-basis123">
                                        <span class="attr">flex-basis</span> :
                                        <input type="radio" name="flex-basis123" id="basis0" data-val="0">
                                        <label for="basis0">0</label>
                                        <input type="radio" name="flex-basis123" checked id="basisauto" data-val="auto">
                                        <label for="basisauto">auto</label>
                                        <input type="text" id="number123" value="" placeholder="px / %">
                                    </div>
                                    <div class="width123">
                                        <span class="attr">width</span> :
                                        <input type="text" id="width123" value="" placeholder="px / %">
                                    </div>
                                </article>
                            </article>
                        </div>



                        <script>
                            const targetParentEle = document.querySelector('.flex1');
                            const targetChildEles = document.querySelectorAll('.flex1 > li');
                            const parent = document.querySelector('.parent');
                            const child = document.querySelector('.child');
                            const num = document.querySelector('#number')
                            const width = document.querySelector('#width')

                            // cus
                            const customBox = document.querySelector('.custom')
                            const customBtn = document.querySelector('.custombtn')
                            const val = {
                                targetNum: 1,
                                flexGrow: 0,
                                flexShrink: 1,
                                flexBasis: "auto",
                                // width: '0px',
                            }


                            const clickEvt = e => {
                                // console.log(e.target.parentNode.parentNode.classList.contains('parent'))
                                // parent click
                                if (e.target.nodeName === 'LABEL' && e.target.parentNode.parentNode.classList.contains('parent')) {
                                    const props = e.target.parentNode.children[0].textContent
                                    const value = e.target.textContent
                                    targetParentEle.style[props] = value
                                }

                                // child click
                                if (e.target.nodeName === 'LABEL' && e.target.parentNode.parentNode.classList.contains('child')) {
                                    // console.log('child')
                                    const props = e.target.parentNode.children[0].textContent
                                    const value = e.target.textContent
                                    for (let i = 0; i < targetChildEles.length; i++) {
                                        targetChildEles[i].style[props] = value
                                    }
                                }

                                if (e.target.nodeName === 'BUTTON' && e.target.classList.contains('number')) {
                                    const props = e.target.parentNode.children[0].textContent;
                                    // let unit = stringFilter(num.value, '%', 'px')
                                    for (let i = 0; i < targetChildEles.length; i++) {
                                        targetChildEles[i].style[props] = num.value
                                    }
                                }

                                if (e.target.nodeName === 'BUTTON' && e.target.classList.contains('width')) {
                                    const props = e.target.parentNode.children[0].textContent;
                                    for (let i = 0; i < targetChildEles.length; i++) {
                                        targetChildEles[i].style[props] = width.value
                                    }
                                }
                            }

                            const stringFilter = (...args) => {
                                // 나 이거 왜 한거지 ..?
                                for (let i = 1; i < args.length; i++) {
                                    if (args[0].indexOf(args[i]) > -1) {
                                        return args[i]
                                        break
                                    }
                                }
                            }


                            const dataset = e => {
                                if (e.target.parentNode.classList.contains('select-box123')) {
                                    val["targetNum"] = e.target.value
                                }
                                if (e.target.parentNode.classList.contains('flex-grow123')) {
                                    val[flexGrow] = e.target.dataset.val
                                }
                                if (e.target.parentNode.classList.contains('flex-shrink123')) {
                                    val["flexShrink"] = e.target.dataset.val
                                }
                                if (e.target.parentNode.classList.contains('flex-basis123')) {
                                    val["flexBasis"] = e.target.dataset.val
                                }
                                if (e.target.parentNode.classList.contains('flex-basis123') && e.target.getAttribute('id') === 'number123') {
                                    val["flexBasis"] = e.target.value
                                }
                                if (e.target.parentNode.classList.contains('width123')) {
                                    val["width"] = e.target.value
                                }
                                console.log('value', val)
                            }

                            const dataInit = () => {

                                console.log(val.flexBasis)

                                for (let i = 0; i < targetChildEles.length; i++) {
                                    targetChildEles[val.targetNum - 1].style["flexGrow"] = val.flexGrow
                                    targetChildEles[val.targetNum - 1].style["flexShrink"] = val.flexShrink
                                    targetChildEles[val.targetNum - 1].style["flexBasis"] = val.flexBasis
                                    targetChildEles[val.targetNum - 1].style["width"] = val.width

                                }
                            }



                            window.addEventListener('click', clickEvt)
                            customBox.addEventListener('change', dataset)
                            customBtn.addEventListener('click', dataInit)


                        </script>
                        <!-- //item -->
                    </div>
                </section>
                <!-- //flex -->

                <!-- grid -->
                <section class="conts">
                    <h2>Grid</h2>
                    <div class="depth_2">
                        <strong></strong>
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button> <span></span></button></dt>
                                <dd>

                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="markdown">
-
                            </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                    </div>
                </section>
                <!-- //grid -->

                <!-- 다크모드 -->
                <section class="conts">
                    <h2>Dark mode</h2>
                    <div class="depth_2">
                        <strong></strong>
                        <!-- item -->
                        <div class="item_wrap">
                            <dl class="item">
                                <dt><button> <span></span>dark mode</button></dt>
                                <dd>

                                </dd>
                            </dl>
                            <div class="code_wrap">
                                <pre>
                            <code class="css">
1. 변수설정 

:root[data-color=data] {
    --main-bg-color: black;
    ... 
    ... 
}


:root[data-color=light] {
    --main-bg-color: #fff;
    ... 
    ... 
}
                            </code>
                            <code class="css">
2. 변수사용 

body { background-color: var(--main-bg-color, #fff) } 
                     </code>
                            <code class="javascript">
3. html 제어 

const darkInput = document.querySelector('.inputTag')

function activeDarkMode() {
    if(darkInput.checked) {
        document.documentElement.setAttribute('data-color', 'dark')
        localStorage.setItem('darkmode', 'dark')
    } else {
        document.documentElement.setAttribute('data-color', 'light')
        localStorage.setItem('darkmode', 'light')
    }
}


                        </code>
                        <code class="javascript">
4. 저장소에 저장해서 쓰기

let dargToggle = localStorage.getItem('darkmode')

function darkmode() {
    if(dargToggle === 'dark') {
        document.documentElement.setAttribute('data-color', 'dark')
        darkInput.checked = true;
    } else {
        document.documentElement.setAttribute('data-color', 'light')
        darkInput.checked = false;
    }
}



let dargToggle = localStorage.getItem('darkmode')

                        </code>
                        </pre>
                            </div>
                        </div>
                        <!-- //item -->
                    </div>
                </section>
                <!-- //다크모드 -->

            </div>
        </main>
        <footer>
            <div class="global_wrap">
                <ul class="info">
                    asdasdsa
                </ul>
            </div>
        </footer>
    </div>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>